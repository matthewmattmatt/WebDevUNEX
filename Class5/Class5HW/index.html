<!DOCTYPE html>
<!--Corrected HW from Class 4 with new features and more elegant coding-->
<html>
<head>
	<title>My Shopping Cart</title>

	<style>
		.invoice {
			width: 100%;	
		}
		.name {
			color: red;
			display: inline;
		}
		.type {
			display: inline;
			padding: 1.5em;
		}
		.qty {
			display: inline-block;
			padding: 1.5em;
			border: 1px solid black;
		}
		.price {
			display: inline;
			padding: 1.5em;
		}
		.totalCost {
			display: inline;
			padding: 1.5em;
		}
	</style>

	<script>
		var customerOrder = [
			{
				itemname:"bananas",
				type:"fruit",
				qty: 2,
				unitPrice:3.50
			},
			{
				itemname:"apples",
				type:"fruit",
				qty: 3,
				unitPrice:1.00
			},
			{
				itemname:"pumpkins ",
				type:"vegetable",
				qty: 5,
				unitPrice:5.00
			},
			{
				itemname:"passionfruit",
				type:"fruit",
				qty: 7,
				unitPrice:1.50
			},
		];

		function createHTMLforInvoice (lineitem) {
			return	  '<div class="invoice">'
						+ '<div class="name">'
						+ lineitem.itemname
						+ '</div>'
						+ " "
						+ '<div class="type">'
						+ lineitem.type
						+ '</div>'
						+ " "
						+ '<div class="qty" id="quantity" onclick="adjust()">'
						+ lineitem.qty
						+ '</div>'
						+ " "
						+ '<div class="price">'
						+ lineitem.unitPrice.toFixed(2)
						+ '</div>'
						+ " "
						+ '<div class="totalCost">'
						+ (lineitem.unitPrice * lineitem.qty).toFixed(2)
						+ '</div>'
					+ "</div>"
					;
		}

		function adjust(array) {
			var newQty = prompt("Please enter your quantity");
			for (currentItem of customerOrder){
				if (newQty == 0) {
					document.getElementById("quantity").style.display.hidden;
				} else {
					document.getElementById("quantity").innerHTML = newQty;
				}
			}
		}

		function calculateTotal(array) {
			var totalPrice = 0.0;
			for (currentItem of customerOrder) {
				totalPrice += (currentItem.qty * currentItem.unitPrice);
			}
			return totalPrice;
		}

		var exactPrice = calculateTotal().toFixed(2);

		function startup() {

			var orderDisplay = "";
			for (currentItem of customerOrder) {
				orderDisplay += createHTMLforInvoice(currentItem);
			}
				
				document.getElementById("invoiceTotal").innerHTML =
				exactPrice;
				
				/*
				document.getElementById("invoiceTotal").innerHTML = 
				String(calculateTotal());
				*/

				document.getElementById("invoice").innerHTML = orderDisplay;
		}

		window.onload = startup;

	</script>
</head>
<body>

	<h1>Order Receipt</h1>
	<div id="invoice"></div>

	<h2>Total Amount Due: <span id="invoiceTotal">This is the total</span></h2>


</body>

</html>